{% if app.user is not null %}
    {% if with_form_container is defined %}
        <div class="comment-form bg-gray-300 p-3 mb-1 rounded-top">
            {{ include('partials/_form.html.twig') }}
        </div>
    {% else %}
        {{ include('partials/_form.html.twig') }}
    {% endif %}
{% else %}
    <div class="text-end">
        <a href="{{ path('app_security_login') }}" class="btn btn-primary mb-3">
            {{ 'label.add_comment' | trans }}
        </a>
    </div>
{% endif %}

{% if with_comments is defined %}
    <div class="comments mb-3">
        {% for userComment in entity.userComments %}
            {% include 'partials/_user-comment-item.html.twig' with {'userComment': userComment} only %}   
        {% endfor %}
    </div>
{% endif %}
